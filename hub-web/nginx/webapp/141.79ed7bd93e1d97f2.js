"use strict";(self.webpackChunkhub_admin=self.webpackChunkhub_admin||[]).push([[141],{40141:(qe,P,n)=>{n.r(P),n.d(P,{ProvidersFeatureListModule:()=>Me,routes:()=>N});var f=n(36895),y=n(62510),u=n(1576),d=n(24006),Q=n(38586),S=n(33165),v=n(13661),Z=n(68745),Y=n(27974),T=n(96308),m=n(30671),H=n(39300),L=n(54004),U=n(63900),F=n(50590),e=n(94650);let M=(()=>{class t{constructor(o){this.fb=o}getForms(){return this.fb.group({id:[{value:"",disabled:!0},d.kI.required],type:[{value:"virtual",disabled:!0},d.kI.required],name:[{value:"",disabled:!0}],fence_timeout:[{value:null,disabled:!0},[d.kI.min(-1)]],exit_tolerance:[{value:null,disabled:!0},[d.kI.min(0)]],tolerance_timeout:[{value:null,disabled:!0},[d.kI.min(-1)]],exit_delay:[{value:null,disabled:!0},[d.kI.min(-1)]]})}}return t.getLocationProviderTypes=[{type:"uwb",name:"uwb"},{type:"gps",name:"gps"},{type:"wifi",name:"wifi"},{type:"rfid",name:"rfid"},{type:"ibeacon",name:"ibeacon"},{type:"virtual",name:"virtual"},{type:"unknown",name:"unknown"}],t.\u0275fac=function(o){return new(o||t)(e.LFG(d.QS))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n(65412),k=n(70262),I=n(39646),c=(()=>{return(t=c||(c={}))[t.create=0]="create",t[t.detail=1]="detail",t[t.edit=2]="edit",c;var t})(),w=n(4859),p=n(59549),A=n(44144),B=n(84385),q=n(3238),D=n(97392),R=n(74900);function K(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," You must provide a "),e.TgZ(2,"strong"),e._uU(3,"id"),e.qZA()()),2&t&&e.uIk("data-cy","location-provider.id.create.error.required")}function $(t,r){if(1&t&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("ngClass","border-zone-type border-zone-type-"+o.type)("value",o.type),e.uIk("data-cy","location-provider.type.select.option."+o.type),e.xp6(1),e.hij(" ",o.name," ")}}function j(t,r){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Must be a positive number or -1 "),e.qZA()),2&t){const o=e.oxw();e.uIk("data-cy","location-provider.fence_timeout."+o.getTypeModeName()+".error.min")}}function O(t,r){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Must be a positive number "),e.qZA()),2&t){const o=e.oxw();e.uIk("data-cy","location-provider.exit_tolerance."+o.getTypeModeName()+".error.min")}}function G(t,r){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Must be a positive number or -1 "),e.qZA()),2&t){const o=e.oxw();e.uIk("data-cy","location-provider.tolerance_timeout."+o.getTypeModeName()+".error.min")}}function V(t,r){if(1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Must be a positive number or -1 "),e.qZA()),2&t){const o=e.oxw();e.uIk("data-cy","location-provider.exit_delay."+o.getTypeModeName()+".error.min")}}let z=(()=>{class t{constructor(){this.fenceTimeoutInfoText="The timeout in milliseconds after which a location should expire and trigger a fence exit event (if no more location updates are sent). Must be a positive number or -1 in case of an infinite timeout. If not set, or set to null, it will default to the trackable or fence timeout setting.",this.exitToleranceInfoText="The minimum distance in meters to release from an ongoing collision or fence event. Must be a positive number. If not set or null exit_tolerance will default to 0.",this.toleranceTimeoutInfoText="The timeout in milliseconds after which a collision outside of an obstacle but still within exit_tolerance distance should release from a collision or fence event. Must be a positive number or -1 in case of an infinite timeout. If not set, or set to null, it will default to the fence or trackable timeout setting.",this.exitDelayInfoText="The delay in milliseconds in which an imminent exit event should wait for another location update. This is relevant for fast rate position updates with quick moving objects. For example, an RTLS provider may batch location updates into groups, resulting in distances being temporarily outdated and premature events between quickly moving objects. The provided number must be positive or -1 in case of an infinite exit_delay. If not set or null, exit_delay will default to 0.",this.createTypes=M.getLocationProviderTypes}errorHandling(o,i){if(this.form)return this.form.controls[o].hasError(i)}getTypeModeName(){return function E(t){return c[t]}(this.typeMode)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["deephub-location-provider-config"]],inputs:{typeMode:"typeMode",form:"form",change:"change"},decls:60,vars:18,consts:[[1,"m0","p0",3,"formGroup"],["fxLayout","row"],["fxFlex","50","appearance","outline",1,"full-width","pr12"],["matInput","","placeholder","Id","formControlName","id"],[4,"ngIf"],["fxFlex","50","appearance","outline",1,"full-width","pl12"],["matInput","","placeholder","Name","formControlName","name"],["formControlName","type"],[3,"ngClass","value",4,"ngFor","ngForOf"],["fxFlex","50",1,"full-width","pr12"],["type","number","matInput","","placeholder","Fence Timeout","formControlName","fence_timeout"],["matSuffix",""],["matSuffix","","deephubTooltip","",1,"suffix-button",3,"text"],["type","number","matInput","","placeholder","Exit-Tolerance","formControlName","exit_tolerance"],["type","number","matInput","","placeholder","Tolerance-Timeout","formControlName","tolerance_timeout"],["type","number","matInput","","placeholder","Exit-Delay","formControlName","exit_delay"],[3,"ngClass","value"]],template:function(o,i){1&o&&(e.TgZ(0,"fieldset",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"ID"),e.qZA(),e._UZ(5,"input",3),e.YNc(6,K,4,1,"mat-error",4),e.qZA(),e.TgZ(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Name"),e.qZA(),e._UZ(10,"input",6),e.qZA()(),e.TgZ(11,"div",1)(12,"mat-form-field",2)(13,"mat-label"),e._uU(14,"Technology"),e.qZA(),e.TgZ(15,"mat-select",7),e.YNc(16,$,2,4,"mat-option",8),e.qZA()(),e._UZ(17,"div",9),e.qZA(),e.TgZ(18,"div",1)(19,"mat-form-field",2)(20,"mat-label"),e._uU(21,"Fence-Timeout"),e.qZA(),e._UZ(22,"input",10),e.TgZ(23,"span",11),e._uU(24,"ms"),e.qZA(),e.TgZ(25,"div",12)(26,"mat-icon"),e._uU(27,"info"),e.qZA()(),e.YNc(28,j,2,1,"mat-error",4),e.qZA(),e.TgZ(29,"mat-form-field",5)(30,"mat-label"),e._uU(31,"Exit-Tolerance"),e.qZA(),e._UZ(32,"input",13),e.TgZ(33,"span",11),e._uU(34,"m"),e.qZA(),e.TgZ(35,"div",12)(36,"mat-icon"),e._uU(37,"info"),e.qZA()(),e.YNc(38,O,2,1,"mat-error",4),e.qZA()(),e.TgZ(39,"div",1)(40,"mat-form-field",2)(41,"mat-label"),e._uU(42,"Tolerance-Timeout"),e.qZA(),e._UZ(43,"input",14),e.TgZ(44,"span",11),e._uU(45,"ms"),e.qZA(),e.TgZ(46,"div",12)(47,"mat-icon"),e._uU(48,"info"),e.qZA()(),e.YNc(49,G,2,1,"mat-error",4),e.qZA(),e.TgZ(50,"mat-form-field",5)(51,"mat-label"),e._uU(52,"Exit-Delay"),e.qZA(),e._UZ(53,"input",15),e.TgZ(54,"span",11),e._uU(55,"ms"),e.qZA(),e.TgZ(56,"div",12)(57,"mat-icon"),e._uU(58,"info"),e.qZA()(),e.YNc(59,V,2,1,"mat-error",4),e.qZA()()()),2&o&&(e.Q6J("formGroup",i.form),e.xp6(5),e.uIk("data-cy","location-provider.id."+i.getTypeModeName()),e.xp6(1),e.Q6J("ngIf",i.errorHandling("id","required")),e.xp6(4),e.uIk("data-cy","location-provider.name."+i.getTypeModeName()),e.xp6(5),e.uIk("data-cy","location-provider.type."+i.getTypeModeName()),e.xp6(1),e.Q6J("ngForOf",i.createTypes),e.xp6(6),e.uIk("data-cy","location-provider.fence_timeout."+i.getTypeModeName()),e.xp6(3),e.Q6J("text",i.fenceTimeoutInfoText),e.xp6(3),e.Q6J("ngIf",i.errorHandling("fence_timeout","min")),e.xp6(4),e.uIk("data-cy","location-provider.exit_tolerance."+i.getTypeModeName()),e.xp6(3),e.Q6J("text",i.exitToleranceInfoText),e.xp6(3),e.Q6J("ngIf",i.errorHandling("exit_tolerance","min")),e.xp6(5),e.uIk("data-cy","location-provider.tolerance_timeout."+i.getTypeModeName()),e.xp6(3),e.Q6J("text",i.toleranceTimeoutInfoText),e.xp6(3),e.Q6J("ngIf",i.errorHandling("tolerance_timeout","min")),e.xp6(4),e.uIk("data-cy","location-provider.exit_delay."+i.getTypeModeName()),e.xp6(3),e.Q6J("text",i.exitDelayInfoText),e.xp6(3),e.Q6J("ngIf",i.errorHandling("exit_delay","min")))},dependencies:[f.mk,f.sg,f.O5,d.Fj,d.wV,d.JJ,d.JL,d.sg,d.u,u.xw,u.yH,p.TO,p.KE,p.hX,p.R9,A.Nt,B.gD,q.ey,D.Hw,R.i],encapsulation:2,changeDetection:0}),t})();function X(t,r){1&t&&(e.TgZ(0,"h1",9),e._uU(1,"New Location Provider"),e.qZA())}function W(t,r){1&t&&(e.TgZ(0,"h1",9),e._uU(1,"Update Location Provider"),e.qZA())}function ee(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.onEdit())}),e._uU(1," Edit "),e.qZA()}2&t&&e.uIk("data-cy","location-provider.none.button.edit")}function te(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.onUpdate())}),e._uU(1," Update "),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("disabled",o.disabledUpdateShowButton()),e.uIk("data-cy","location-provider.edit.button.update")}}function oe(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.onCreate())}),e._uU(1," Save "),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("disabled",o.disabledSaveShowButton()),e.uIk("data-cy","location-provider.createEdit.button.create")}}let ie=(()=>{class t{constructor(o,i,a){this.dialogRef=o,this.data=i,this.formLocationProviderConfigService=a,this.subs=new Z.Y,this.typeMode=c.create,this.change=!1,this.form=this.formLocationProviderConfigService.getForms(),this.typeMode=i.mode,this.typeMode!==c.detail&&this.form.enable(),i.load&&this.subs.add(i.load.subscribe(l=>{this.setValueForm(l),this.change=!this.change}))}ngOnDestroy(){this.subs.unsubscribe()}onNoClick(){this.dialogRef.close(!1)}onCreate(){if(this.form.markAllAsTouched(),this.change=!this.change,this.form.valid){const o=this.form.value;this.form.disable(),this.data.create(o).pipe((0,k.K)(i=>(console.log(i),this.form.enable(),(0,I.of)()))).subscribe(()=>{this.dialogRef.close(!0)})}}editMode(){this.form.enable(),this.typeMode=c.edit}onEdit(){this.data.onEdit().subscribe(()=>{this.editMode()})}onUpdate(){if(this.form.markAllAsTouched(),this.form.valid){const o=this.form.value;this.form.disable(),this.data.update(o).pipe((0,k.K)(i=>(console.log(i),this.form.enable(),(0,I.of)()))).subscribe(()=>{this.dialogRef.close(!0)})}}setValueForm(o){if(!o)return;const i=this.form.enabled;i||this.form.enable(),this.form.patchValue(o,{emitEvent:!1,onlySelf:!0}),i||this.form.disable(),this.form.updateValueAndValidity()}isEditShowButton(){return this.typeMode===c.detail}isSaveShowButton(){return this.typeMode===c.create}isUpdateShowButton(){return this.typeMode!==c.create}disabledSaveShowButton(){return this.typeMode!==c.create}disabledUpdateShowButton(){return this.typeMode!==c.edit}isCreate(){return this.typeMode===c.create}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h.so),e.Y36(h.WI),e.Y36(M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["deephub-create-location-provider-dialog"]],decls:12,vars:9,consts:[["mat-dialog-title","",4,"ngIf"],["mat-dialog-content",""],[3,"form","change","typeMode"],["mat-dialog-actions","","fxLayout","row"],["fxFlex","","fxLayoutAlign","start none"],["mat-button","","cdkFocusInitial","",3,"click",4,"ngIf"],["fxFlex","","fxLayoutAlign","end none"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","click",4,"ngIf"],["mat-dialog-title",""],["mat-button","","cdkFocusInitial","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","click"]],template:function(o,i){1&o&&(e.YNc(0,X,2,0,"h1",0),e.YNc(1,W,2,0,"h1",0),e.TgZ(2,"div",1),e._UZ(3,"deephub-location-provider-config",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e.YNc(6,ee,2,1,"button",5),e.qZA(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return i.onNoClick()}),e._uU(9," Cancel "),e.qZA(),e.YNc(10,te,2,2,"button",8),e.YNc(11,oe,2,2,"button",8),e.qZA()()),2&o&&(e.Q6J("ngIf",i.isCreate()),e.xp6(1),e.Q6J("ngIf",!i.isCreate()),e.xp6(2),e.Q6J("form",i.form)("change",i.change)("typeMode",i.typeMode),e.xp6(3),e.Q6J("ngIf",i.isEditShowButton()),e.xp6(2),e.uIk("data-cy","location-provider.edit.button.cancel"),e.xp6(2),e.Q6J("ngIf",i.isUpdateShowButton()),e.xp6(1),e.Q6J("ngIf",i.isSaveShowButton()))},dependencies:[f.O5,u.xw,u.Wh,u.yH,w.lW,h.uh,h.xY,h.H8,z],encapsulation:2,changeDetection:0}),t})();var re=n(48602),C=n(28255);function ae(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.clear())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function ne(t,r){1&t&&(e.TgZ(0,"th",37),e._uU(1," Name "),e.qZA())}const g=function(t){return["/map/system/providers","detail",t]},_=function(){return{tab:0}};function le(t,r){if(1&t&&(e.TgZ(0,"td",38),e._uU(1),e._UZ(2,"br"),e.TgZ(3,"span",39),e._uU(4),e.qZA()()),2&t){const o=r.$implicit,i=r.index,a=e.oxw();e.Q6J("routerLink",e.VKq(11,g,o.id))("queryParams",e.DdM(13,_))("queryParamsHandling","merge"),e.uIk("data-cy","location-provider.list.element")("data-cy-id","location-provider.list.element.id."+o.id)("data-cy-name","location-provider.list.element.name."+a.removeSpace(o.name))("data-cy-sort","location-provider.list.element.name."+i),e.xp6(1),e.hij(" ",o.name," "),e.xp6(2),e.uIk("data-cy","location-provider.list.id."+i)("data-cy-name","location-provider.list.id."+a.removeSpace(o.name)),e.xp6(1),e.Oqu(o.id)}}function de(t,r){1&t&&(e.TgZ(0,"th",40),e._uU(1," Type "),e.qZA())}function ce(t,r){if(1&t&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&t){const o=r.$implicit,i=r.index;e.Q6J("routerLink",e.VKq(5,g,o.id))("queryParams",e.DdM(7,_))("ngClass","provider_type_color_"+o.type),e.uIk("data-cy-sort","location-provider.list.element.type."+i),e.xp6(1),e.hij(" ",o.type," ")}}function se(t,r){1&t&&(e.TgZ(0,"th",42),e._uU(1," Fence-Timeout (ms) "),e.qZA())}function me(t,r){if(1&t&&(e.TgZ(0,"td",43),e._uU(1),e.qZA()),2&t){const o=r.$implicit,i=r.index;e.Q6J("routerLink",e.VKq(4,g,o.id))("queryParams",e.DdM(6,_)),e.uIk("data-cy-sort","location-provider.list.element.fence_timeout."+i),e.xp6(1),e.hij(" ",o.fence_timeout," ")}}function ue(t,r){1&t&&(e.TgZ(0,"th",44),e._uU(1," Exit-Delay (ms) "),e.qZA())}function pe(t,r){if(1&t&&(e.TgZ(0,"td",43),e._uU(1),e.qZA()),2&t){const o=r.$implicit,i=r.index;e.Q6J("routerLink",e.VKq(4,g,o.id))("queryParams",e.DdM(6,_)),e.uIk("data-cy-sort","location-provider.list.element.exit_delay."+i),e.xp6(1),e.hij(" ",o.exit_delay," ")}}function fe(t,r){1&t&&(e.TgZ(0,"th",45),e._uU(1," Exit-Tolerance (m) "),e.qZA())}function ve(t,r){if(1&t&&(e.TgZ(0,"td",43),e._uU(1),e.qZA()),2&t){const o=r.$implicit,i=r.index;e.Q6J("routerLink",e.VKq(4,g,o.id))("queryParams",e.DdM(6,_)),e.uIk("data-cy-sort","location-provider.list.element.exit_tolerance."+i),e.xp6(1),e.hij(" ",o.exit_tolerance||0," ")}}function he(t,r){1&t&&(e.TgZ(0,"th",46),e._uU(1," Tolerance-Timeout (ms) "),e.qZA())}function ge(t,r){if(1&t&&(e.TgZ(0,"td",43),e._uU(1),e.qZA()),2&t){const o=r.$implicit,i=r.index;e.Q6J("routerLink",e.VKq(4,g,o.id))("queryParams",e.DdM(6,_)),e.uIk("data-cy-sort","location-provider.list.element.tolerance_timeout."+i),e.xp6(1),e.hij(" ",o.tolerance_timeout||0," ")}}function _e(t,r){1&t&&(e.TgZ(0,"th",47),e._uU(1,"Properties"),e.qZA())}function ye(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(o);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.propertiesEdit(a.id))}),e._uU(1," Edit "),e.qZA()}if(2&t){const o=e.oxw(),i=o.index,a=o.$implicit,l=e.oxw();e.uIk("data-cy","location-provider.list.properties.edit."+i)("data-cy-name","location-provider.list.properties.edit."+l.removeSpace(a.name))}}function xe(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(o);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.propertiesEdit(a.id))}),e._uU(1," Add "),e.qZA()}if(2&t){const o=e.oxw(),i=o.index,a=o.$implicit,l=e.oxw();e.uIk("data-cy","location-provider.list.properties.add."+i)("data-cy-name","location-provider.list.properties.add."+l.removeSpace(a.name))}}function be(t,r){if(1&t&&(e.TgZ(0,"td",48),e.YNc(1,ye,2,2,"button",49),e.YNc(2,xe,2,2,"button",49),e.qZA()),2&t){const o=r.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.hasProperties(o.properties)),e.xp6(1),e.Q6J("ngIf",!i.hasProperties(o.properties))}}function Te(t,r){1&t&&(e.TgZ(0,"th",47),e._uU(1,"Actions"),e.qZA())}const Ce=function(t){return["/map/system/providers","edit",t]},Pe=function(){return{tab:1}};function Ze(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"td",51)(1,"button",52),e._UZ(2,"mat-icon",53),e.qZA(),e.TgZ(3,"mat-menu",null,54)(5,"button",55),e._uU(6," Edit "),e.qZA(),e.TgZ(7,"button",56),e.NdJ("click",function(){const l=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.deleteProvider(l.id))}),e._uU(8," Delete "),e.qZA()()()}if(2&t){const o=r.$implicit,i=r.index,a=e.MAs(4),l=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.uIk("data-cy","location-provider.menu.button."+i)("data-cy-name","location-provider.menu.button."+l.removeSpace(o.name)),e.xp6(4),e.Q6J("routerLink",e.VKq(9,Ce,o.id))("queryParams",e.DdM(11,Pe)),e.uIk("data-cy","location-provider.menu.button.edit."+i)("data-cy-name","location-provider.menu.button.edit."+l.removeSpace(o.name)),e.xp6(2),e.uIk("data-cy","location-provider.menu.button.delete."+i)("data-cy-name","location-provider.menu.button.delete."+l.removeSpace(o.name))}}function Le(t,r){1&t&&e._UZ(0,"tr",57)}function Ue(t,r){1&t&&e._UZ(0,"tr",58)}const Fe=function(){return["/map/system/providers","create"]};let x=(()=>{class t{constructor(o,i,a,l){this.activatedRoute=o,this.router=i,this.dialog=a,this.providersFacade=l,this.subs=new Z.Y,this.dialogOpen=!1,this.search="",this.displayedColumns=["name","type","fence_timeout","exit_delay","exit_tolerance","tolerance_timeout","properties","star"],this.locationProviders=new m.by([]),this.subs.add(this.router.events.pipe((0,H.h)(s=>s instanceof y.m2),(0,L.U)(()=>this.activatedRoute),(0,U.w)(s=>s.data.pipe((0,F.P)()))).subscribe(s=>{if(this.dialogOpen)return;let b;if(this.providersFacade.loadProviders(),"detail"===s.setting?.path)b=c.detail;else if("create"===s.setting?.path)b=c.create;else{if("edit"!==s.setting?.path)return;b=c.edit}const ke=s.setting.providerId,Ie={width:"1000px",data:{mode:b,load:this.providersFacade.providerList$.pipe((0,L.U)(J=>J.filter(Ae=>Ae.id===ke)[0])),create:this.createLocationProvider.bind(this),update:this.updateLocationProvider.bind(this),onEdit:()=>this.providersFacade.$loadProviders()}};this.dialogOpen=!0;const we=this.dialog.open(ie,Ie);this.subs.add(we.afterClosed().pipe((0,U.w)(J=>this.providersFacade.$loadProviders().pipe((0,F.P)()))).subscribe(()=>{this.dialogOpen=!1,this.router.navigateByUrl(this.router.createUrlTree(["/map/system","providers","list"],{relativeTo:this.activatedRoute,queryParamsHandling:"merge",preserveFragment:!0}))}))}),this.providersFacade.providerList$.subscribe(s=>{this.locationProviders.data=s}))}ngAfterViewInit(){this.locationProviders.paginator=this.paginator,this.locationProviders.sort=this.sort}ngOnDestroy(){this.subs.unsubscribe()}updateLocationProvider(o){const i=this.providersFacade.getProviderById(o.id);return i&&i.properties&&(o.properties=i.properties),i&&i.sensors&&(o.sensors=i.sensors),this.providersFacade.updateProvider(o)}createLocationProvider(o){return this.providersFacade.addProvider(o)}deleteProvider(o){this.providersFacade.deleteProvider(o).subscribe(()=>{this.providersFacade.loadProviders()})}applyFilter(o){this.locationProviders.filter=o.trim().toLowerCase(),this.locationProviders.paginator&&this.locationProviders.paginator.firstPage()}hasProperties(o){return o&&Object.keys(o).length}propertiesEdit(o){const i=this.dialog.open(re.f6,{width:"90vh",panelClass:"full-height",maxHeight:"70vh",minHeight:"400px",data:{value:this.providersFacade.getProviderById(o)?.properties,update:a=>this.saveProperties(o,a)}});this.subs.add(i.afterClosed().subscribe(a=>{a&&this.providersFacade.loadProviders()}))}saveProperties(o,i){const a=this.providersFacade.getProviderById(o);return this.providersFacade.updateProvider({...a,properties:i})}clear(){this.search="",this.applyFilter(this.search)}removeSpace(o){return o?o.toString().replace(/\s+/g,""):""}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(y.gz),e.Y36(y.F0),e.Y36(h.uw),e.Y36(v.FE))},t.\u0275cmp=e.Xpm({type:t,selectors:[["deephub-location-provider-list"]],viewQuery:function(o,i){if(1&o&&(e.Gf(Y.NW,5),e.Gf(T.YE,5)),2&o){let a;e.iGM(a=e.CRH())&&(i.paginator=a.first),e.iGM(a=e.CRH())&&(i.sort=a.first)}},decls:47,vars:13,consts:[[1,"full_side"],[3,"fxLayout"],["fxLayoutAlign","start center",3,"fxFlex"],[1,"h1"],[1,"box-center",3,"fxFlex"],["appearance","outline"],["matPrefix",""],["matInput","","placeholder","Search and Filter Location Provider","data-cy","location-provider.search.input",3,"ngModel","keyup","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear","data-cy","location-provider.search.clear",3,"click",4,"ngIf"],["fxLayoutAlign","end center",3,"fxFlex"],["mat-line","","mat-stroked-button","","color","primary","data-cy","location-provider.create.button",3,"routerLink","queryParamsHandling"],[1,"with-icon"],[1,"table-viewport"],["mat-table","","matSort","","matSortActive","name","matSortDisableClear","","matSortDirection","asc",1,"is-full-width",3,"dataSource"],["matColumnDef","name","sticky",""],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.name",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink","queryParams","queryParamsHandling",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.type",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink","queryParams","ngClass",4,"matCellDef"],["matColumnDef","fence_timeout"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.fence_timeout",4,"matHeaderCellDef"],["mat-cell","",3,"routerLink","queryParams",4,"matCellDef"],["matColumnDef","exit_delay"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.exit_delay",4,"matHeaderCellDef"],["matColumnDef","exit_tolerance"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.exit_tolerance",4,"matHeaderCellDef"],["matColumnDef","tolerance_timeout"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.tolerance_timeout",4,"matHeaderCellDef"],["matColumnDef","properties"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","star","stickyEnd",""],["mat-cell","","class","column-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","table-line-hover",4,"matRowDef","matRowDefColumns"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear","data-cy","location-provider.search.clear",3,"click"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.name"],["mat-cell","",3,"routerLink","queryParams","queryParamsHandling"],[1,"small"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.type"],["mat-cell","",3,"routerLink","queryParams","ngClass"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.fence_timeout"],["mat-cell","",3,"routerLink","queryParams"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.exit_delay"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.exit_tolerance"],["mat-header-cell","","mat-sort-header","","data-cy","location-provider.list.header.tolerance_timeout"],["mat-header-cell",""],["mat-cell",""],["mat-line","","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-line","","mat-stroked-button","","color","primary",3,"click"],["mat-cell","",1,"column-center"],["mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","fa","fontIcon","fa-ellipsis-h",1,"fas"],["menu","matMenu"],["mat-menu-item","",3,"routerLink","queryParams"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"table-line-hover"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"All Location Providers"),e.qZA()(),e.TgZ(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e._uU(8,"Search and Filter Location Provider"),e.qZA(),e.TgZ(9,"mat-icon",6),e._uU(10,"search"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("keyup",function(l){return i.applyFilter(l.target.value)})("ngModelChange",function(l){return i.search=l}),e.qZA(),e.YNc(12,ae,3,0,"button",8),e.qZA()(),e.TgZ(13,"div",9)(14,"button",10)(15,"div",11)(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e._uU(18," New Location Provider "),e.qZA()()()(),e.TgZ(19,"div",12)(20,"table",13),e.ynx(21,14),e.YNc(22,ne,2,0,"th",15),e.YNc(23,le,5,14,"td",16),e.BQk(),e.ynx(24,17),e.YNc(25,de,2,0,"th",18),e.YNc(26,ce,2,8,"td",19),e.BQk(),e.ynx(27,20),e.YNc(28,se,2,0,"th",21),e.YNc(29,me,2,7,"td",22),e.BQk(),e.ynx(30,23),e.YNc(31,ue,2,0,"th",24),e.YNc(32,pe,2,7,"td",22),e.BQk(),e.ynx(33,25),e.YNc(34,fe,2,0,"th",26),e.YNc(35,ve,2,7,"td",22),e.BQk(),e.ynx(36,27),e.YNc(37,he,2,0,"th",28),e.YNc(38,ge,2,7,"td",22),e.BQk(),e.ynx(39,29),e.YNc(40,_e,2,0,"th",30),e.YNc(41,be,3,2,"td",31),e.BQk(),e.ynx(42,32),e.YNc(43,Te,2,0,"th",30),e.YNc(44,Ze,9,12,"td",33),e.BQk(),e.YNc(45,Le,1,0,"tr",34),e.YNc(46,Ue,1,0,"tr",35),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("fxLayout","row"),e.xp6(1),e.Q6J("fxFlex",33),e.xp6(3),e.Q6J("fxFlex",33),e.xp6(6),e.Q6J("ngModel",i.search),e.xp6(1),e.Q6J("ngIf",i.search),e.xp6(1),e.Q6J("fxFlex",34),e.xp6(1),e.Q6J("routerLink",e.DdM(12,Fe))("queryParamsHandling","merge"),e.xp6(6),e.Q6J("dataSource",i.locationProviders),e.xp6(25),e.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[f.mk,f.O5,y.rH,p.KE,p.hX,p.qo,p.R9,A.Nt,q.X2,w.lW,C.VK,C.OP,C.p6,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,D.Hw,T.YE,T.nU,u.xw,u.Wh,u.yH,d.Fj,d.JJ,d.On],styles:["deephub-location-provider-list{width:100%;padding-right:16px;padding-left:16px;position:absolute;top:0;bottom:0;z-index:100;background-color:#fff;box-sizing:border-box}.full_side{height:100%;margin:0 auto;box-sizing:border-box;position:relative}td{color:#878787}td .notfound{color:#d31a1a}.mat-form-field{font-size:14px;width:100%}.mat-row:hover{background-color:#f7fbfe}.mat-cell[ng-reflect-router-link]{cursor:pointer}.mat-cell span{padding-left:4px}.mat-cell:first-child span{padding-left:0}.table-viewport{height:calc(100vh - 209px);width:100%;overflow:auto}table{width:100%}th.mat-header-cell{background-color:#fcfcfc}.small{font-size:12px}.box-center{margin-top:5px}.mr16{margin-right:16px!important}\n"],encapsulation:2,changeDetection:0}),t})();const N=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"detail/:providerId",component:x,resolve:{setting:v.UP}},{path:"create",component:x,resolve:{setting:v.UP}},{path:"edit/:providerId",component:x,resolve:{setting:v.UP}},{path:"list",component:x,resolve:{setting:v.UP}}];let Me=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,y.Bz.forChild(N),v.i4,S.$,Q.X,u.ae,d.u5,d.UX]}),t})()}}]);